---
layout: layouts/base.njk
---

<section class="hero">
{% set headerImage = heroImage or image %}

{% if headerImage %}
  <div class="page-hero">
    <img
      class="page-hero__img"
      src="{{ headerImage }}"
      alt="{{ heroAlt or imageAlt or title }}"
      loading="eager"
    />
  </div>

  {% if heroCaption or imageCaption %}
    <p class="caption">{{ heroCaption or imageCaption }}</p>
  {% endif %}
{% endif %}

  <h1>{{ title }}</h1>

  {% if subtitle %}
    <p class="tagline">{{ subtitle }}</p>
  {% endif %}

  {% if abstract %}
    <p class="tagline">{{ abstract }}</p>
  {% endif %}
</section>

{% if date %}
  <p class="small">Published {{ date | postDate }}</p>
{% endif %}

<div class="episode-body">
  {{ content | safe }}
</div>

{% if relatedEpisodes and relatedEpisodes.length %}
  <section class="episode-links">
    <h2>Related Episode{% if relatedEpisodes.length > 1 %}s{% endif %}</h2>
    <ul>
      {% for slug in relatedEpisodes %}
        {% set ep = collections.episodes | episodeBySlug(slug) %}
        {% if ep %}
          <li><a href="{{ ep.url }}">{{ ep.data.title }}</a></li>
        {% else %}
          <li><a href="/episodes/{{ slug }}/">{{ slug }}</a></li>
        {% endif %}
      {% endfor %}
    </ul>
  </section>
{% endif %}

{% if themes and themes.length %}
  <section class="episode-links">
    <h2>Themes</h2>
    <ul>
      {% for theme in themes %}
        <li>{{ theme }}</li>
      {% endfor %}
    </ul>
  </section>
{% endif %}
